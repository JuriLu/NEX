<p-toolbar styleClass="mbux-navbar glass-panel">
  <div class="p-toolbar-group-start">
    <!-- NEX Logo & Motto -->
    <a routerLink="/" class="logo-container no-underline">
      <img src="logo.png" alt="NEX Logo" class="mbux-logo shadow-8" />
      <div class="branding">
        <span class="brand-name">NEX</span>
        <span class="brand-motto">ReadyGo</span>
      </div>
    </a>
  </div>

  <div class="p-toolbar-group-center">
    <!-- Centered Navigation for Balanced Look -->
    <div [class]="styles.navLinks">
      <a
        routerLink="/"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: true }"
        class="nav-item"
        >Home</a
      >
      <a routerLink="/catalog" routerLinkActive="active-link" class="nav-item">Fleet</a>
      <a routerLink="/services" routerLinkActive="active-link" class="nav-item">Services</a>
      <a routerLink="/contact" routerLinkActive="active-link" class="nav-item">Contact</a>
      @if (isAdmin$ | async) {
      <a routerLink="/admin" routerLinkActive="active-link" class="nav-item admin-tool">Manage</a>
      }
    </div>
  </div>

  <div class="p-toolbar-group-end gap-3">
    @if (isLoggedIn$ | async) {
    <div [class]="styles.userPill" class="user-pill-container relative"> <!-- Added relative for dropdown positioning -->
      <span [class]="styles.welcomeText"
        >Hello, <span class="text-white font-bold">{{ (user$ | async)?.firstName }}</span></span
      >
      <p-avatar
        icon="pi pi-user"
        shape="circle"
        styleClass="mbux-avatar cursor-pointer"
        (click)="toggleMenu()"
      >
      </p-avatar>

      <!-- Manual Dropdown Menu -->
      @if (isMenuOpen) {
      <div class="mbux-dropdown-menu">
        <a routerLink="/profile" class="mbux-menu-item" (click)="closeMenu()">
            <i class="pi pi-user"></i>
            <span>Profile</span>
        </a>
        <a routerLink="/bookings" class="mbux-menu-item" (click)="closeMenu()">
            <i class="pi pi-calendar"></i>
            <span>My Bookings</span>
        </a>
        <div class="menu-separator"></div>
        <button class="mbux-menu-item logout-item" (click)="onLogout()">
            <i class="pi pi-sign-out"></i>
            <span>Logout</span>
        </button>
      </div>
      }
    </div>
    } @else {
    <div [class]="styles.authButtons">
      <p-button
        label="Sign In"
        icon="pi pi-user"
        styleClass="p-button-text p-button-sm text-white"
        routerLink="/auth/login"
      ></p-button>
      <p-button
        label="Register"
        styleClass="p-button-sm p-button-primary"
        routerLink="/auth/register"
      ></p-button>
    </div>
    }
  </div>
</p-toolbar>
