<div [class]="styles.authWrapper">
  <!-- Dynamic Background Effects -->
  <div class="auth-ambient"></div>
  <div class="auth-mesh"></div>

  <div class="auth-container p-4 fadein animation-duration-1000">
    <div [class]="styles.authCard">
      <div class="text-center mb-6">
        <div [class]="styles.logoBox">
          <img src="logo.png" alt="NEX Logo" class="h-4rem" />
        </div>
        <h2 class="text-4xl font-black mb-1 text-white">
          READY<span [class]="theme.ui.gradientText">GO</span>
        </h2>
        <p [class]="theme.typography.label">Access Premium Mobility</p>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="flex flex-column gap-5">
        @if (error$ | async; as error) {
        <div [class]="styles.validationWarning">
          <i class="pi pi-exclamation-triangle"></i>
          {{ error }}
        </div>
        }

        <div class="form-group">
          <label [class]="styles.label">Email</label>
          <input
            pInputText
            formControlName="email"
            class="mbux-input"
            placeholder="Enter NEX email"
          />
          @if ((submitted || loginForm.get('email')?.touched) && loginForm.get('email')?.invalid) {
          <div [class]="styles.validationWarning" [class.innovative]="loginForm.get('email')?.hasError('email')" class="mt-2">
            <i class="pi pi-info-circle"></i>
            <div class="flex flex-column">
              @if (loginForm.get('email')?.hasError('required')) { <span>Email is required.</span> }
              @if (loginForm.get('email')?.hasError('email')) { <span>Invalid email format.</span> }
            </div>
          </div>
          }
        </div>

        <div class="form-group">
          <div [class]="theme.layout.flexBetween" class="mb-2">
            <label [class]="styles.label" class="mb-0">Password</label>
            <a
              class="text-primary font-bold text-xs no-underline hover:text-white cursor-pointer transition-all"
              >Forgot Password?</a
            >
          </div>
          <p-password
            formControlName="password"
            [feedback]="false"
            [toggleMask]="true"
            styleClass="w-full"
            inputStyleClass="mbux-input"
            placeholder="••••••••"
          ></p-password>
          @if ((submitted || loginForm.get('password')?.touched) &&
          loginForm.get('password')?.invalid) {
          <div [class]="styles.validationWarning" class="mt-2">
            <i class="pi pi-shield"></i>
            Password required.
          </div>
          }
        </div>

        <div class="flex align-items-center">
          <p-checkbox [binary]="true" inputId="remember" styleClass="mbux-checkbox"></p-checkbox>
          <label for="remember" class="ml-2 text-secondary text-sm cursor-pointer"
            >Remember me</label
          >
        </div>

        <p-button
          label="Authenticate"
          type="submit"
          [loading]="(loading$ | async) || false"
          styleClass="p-button-primary p-button-lg w-full py-4"
          [disabled]="loginForm.invalid"
        ></p-button>

        <div class="text-center mt-4">
          <span class="text-secondary text-sm">New to NEX? </span>
          <a
            routerLink="/auth/register"
            [class]="theme.ui.gradientText"
            class="no-underline hover:brightness-150 transition-all cursor-pointer"
            >Sign Up</a
          >
        </div>
      </form>
    </div>
  </div>
</div>
