<div class="mission-control py-8 px-4 lg:px-8">
  <div [class]="theme.layout.container">
    <div [class]="theme.layout.flexBetween" class="mb-6 gap-4">
      <div class="fadeinleft animation-duration-800">
        <h1 [class]="theme.typography.sectionHeading" class="mb-2">
          Mission <span [class]="theme.ui.gradientText">Control</span>
        </h1>
        <p [class]="theme.typography.sectionSubheading" class="font-medium m-0">
          Tracking your premium mobility status.
        </p>
      </div>
      <div class="fadeinright animation-duration-800">
        <p-button
          label="New Mission"
          icon="pi pi-plus"
          routerLink="/catalog"
          styleClass="p-button-outlined"
        ></p-button>
      </div>
    </div>

    <div [class]="styles.tableContainer">
      <p-table
        [value]="(userBookings$ | async) || []"
        [responsiveLayout]="'stack'"
        [breakpoint]="'960px'"
        styleClass="mbux-table"
      >
        <ng-template pTemplate="header">
          <tr>
            <th [class]="styles.tableHeader">Vehicle Unit</th>
            <th [class]="styles.tableHeader" class="text-center">Deployment Window</th>
            <th [class]="styles.tableHeader" class="text-center">Mission Cost</th>
            <th [class]="styles.tableHeader" class="text-center">Status</th>
            <th [class]="styles.tableHeader"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-booking>
          <tr [class]="styles.missionRow">
            <td>
              <div class="flex align-items-center">
                <div [class]="styles.carUnitImg">
                  <img [src]="booking.car?.image" [alt]="booking.car?.brand" />
                </div>
                <div>
                  <div class="text-white font-bold text-xl">
                    {{ booking.car?.brand }} {{ booking.car?.model }}
                  </div>
                  <div [class]="theme.typography.label">{{ booking.car?.category }}</div>
                </div>
              </div>
            </td>
            <td class="text-center">
              <div class="flex flex-column align-items-center">
                <div class="text-white font-medium">
                  {{ booking.startDate | date : 'MMM d' }} â€”
                  {{ booking.endDate | date : 'MMM d, y' }}
                </div>
                <div class="text-secondary text-xs mt-1">Duration: Active</div>
              </div>
            </td>
            <td class="text-center">
              <span class="text-xl font-bold text-white">{{
                booking.totalPrice | currency : booking.currency || 'USD'
              }}</span>
            </td>
            <td class="text-center">
              <p-tag
                [value]="booking.status"
                [severity]="getSeverity(booking.status)"
                styleClass="status-glow"
              ></p-tag>
            </td>
            <td class="text-right">
              <p-button
                icon="pi pi-ellipsis-v"
                styleClass="p-button-text text-secondary"
              ></p-button>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="5" class="empty-state py-8">
              <div class="flex flex-column align-items-center">
                <div class="empty-icon-box mb-4">
                  <i class="pi pi-history text-5xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">No Active Missions</h3>
                <p [class]="theme.typography.paragraph" class="mb-5">
                  Your deployment history is currently clear.
                </p>
                <p-button
                  label="Explore the Fleet"
                  icon="pi pi-car"
                  routerLink="/catalog"
                  styleClass="p-button-primary"
                ></p-button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
