<div class="surface-ground px-4 py-8 md:px-6 lg:px-8">
    <div class="text-center mb-5">
        <h2 class="text-4xl font-bold text-900 mb-2">Our Premium Fleet</h2>
        <p class="text-600 font-medium">Choose from our exclusive collection of luxury vehicles.</p>
    </div>

    <div class="card">
        <p-dataView #dv [value]="(cars$ | async) || []" layout="grid" [rows]="8" [paginator]="true">
            <ng-template #grid let-items>
                <div class="grid grid-nogutter">
                    <div class="col-12 sm:col-6 md:col-4 xl:col-3 p-3" *ngFor="let car of items">
                        <div class="car-card p-0 shadow-2 border-round-xl flex flex-column h-full overflow-hidden">
                            <div class="car-image-container flex justify-content-center align-items-center p-4 relative" style="height: 200px;">
                                <img class="car-image w-full h-full object-contain" [src]="car.image" [alt]="car.brand" />
                                <p-tag [value]="car.available ? 'Available' : 'Booked'" [severity]="getSeverity(car)" class="absolute" [style.left.px]="12" [style.top.px]="12"></p-tag>
                            </div>

                            <div class="p-4 flex flex-column justify-content-between flex-grow-1">
                                <div class="flex flex-row justify-content-between align-items-start mb-3">
                                    <div>
                                        <span class="text-primary font-bold text-xs uppercase">{{ car.category }}</span>
                                        <div class="text-xl font-bold text-900 mt-1">{{ car.brand }} {{ car.model }}</div>
                                    </div>
                                    <div class="price-badge">
                                        {{ car.pricePerDay | currency }}/day
                                    </div>
                                </div>

                                <div class="flex flex-column gap-3">
                                    <div class="flex flex-wrap gap-2 mb-3">
                                        @for (feature of car.features; track $index) {
                                            <span class="px-2 py-1 surface-100 border-round text-600 text-xs">{{ feature }}</span>
                                        }
                                    </div>
                                    <div class="flex gap-2">
                                        <p-button icon="pi pi-heart" [outlined]="true" [rounded]="true" severity="secondary"></p-button>
                                        <p-button icon="pi pi-arrow-right" class="flex-auto" label="Explore & Book" [disabled]="!car.available" [routerLink]="['/booking', car.id]"></p-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
            <ng-template #empty>
                <div class="text-center p-8 surface-section border-round-xl">
                    <i class="pi pi-search text-6xl text-400 mb-4"></i>
                    <p class="text-xl text-600">No cars found in our fleet yet.</p>
                </div>
            </ng-template>
        </p-dataView>
    </div>
</div>
