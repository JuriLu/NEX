<div class="catalog-page px-4 py-8 md:px-6 lg:px-8">
    <div class="text-center mb-8">
        <h2 class="text-5xl font-black mb-2 text-gradient">NEX Masterpiece Fleet</h2>
        <p class="text-secondary text-xl">Curated collection of the world's most innovative vehicles.</p>
    </div>

    <div class="card">
        <p-dataView #dv [value]="(cars$ | async) || []" layout="grid" [rows]="8" [paginator]="true">
            <ng-template #grid let-items>
                <div class="grid grid-nogutter">
                    <div class="col-12 sm:col-6 md:col-4 lg:col-4 xl:col-4 p-3" *ngFor="let car of items">
                        <div class="p-card car-card flex flex-column h-full glass-panel hover-glow transition-all">
                            <div class="car-image-container relative overflow-hidden">
                                <img class="car-image" [src]="car.image" [alt]="car.brand" />
                                <div class="image-overlay"></div>
                                <p-tag [value]="car.available ? 'ReadyGo' : 'On Mission'"
                                       [severity]="getSeverity(car)"
                                       class="absolute" [style.left.px]="15" [style.top.px]="15">
                                </p-tag>
                            </div>

                            <div class="p-4 flex flex-column justify-content-between flex-grow-1">
                                <div class="flex flex-row justify-content-between align-items-start mb-4">
                                    <div>
                                        <span class="text-primary font-bold text-xs uppercase tracking-widest">{{ car.category }}</span>
                                        <div class="text-2xl font-bold mt-1 text-white">{{ car.brand }} {{ car.model }}</div>
                                    </div>
                                    <div class="price-pill glass-panel px-3 py-1 mt-1">
                                        <span class="text-white font-bold">{{ car.pricePerDay | currency: car.currency || 'USD' }}</span>
                                        <span class="text-secondary text-xs">/day</span>
                                    </div>
                                </div>

                                <div class="flex flex-column gap-4">
                                    <div class="flex flex-wrap gap-2">
                                        @for (feature of car.features; track $index) {
                                            <span class="feature-chip">{{ feature }}</span>
                                        }
                                    </div>
                                    <div class="flex gap-3">
                                        <p-button icon="pi pi-bolt" [outlined]="true" label="Specs" styleClass="p-button-sm"></p-button>
                                        <p-button class="flex-auto" label="Reserve" [disabled]="!car.available" [routerLink]="['/booking', car.id]"></p-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
            <ng-template #empty>
                <div class="text-center p-8 glass-panel border-round-xl">
                    <i class="pi pi-search text-6xl text-primary mb-4"></i>
                    <p class="text-xl text-secondary">The fleet is currently deployed. Check back soon for the next wave.</p>
                </div>
            </ng-template>
        </p-dataView>
    </div>
</div>
